#!/usr/local/bin/php
<?php
set_include_path(get_include_path() . PATH_SEPARATOR . '/data/phplib/zend');
require_once 'Zend/Http/Client.php';

$rt = new Zend_Http_Client('http://localhost/daw/xml/COD-RT/v2/Incidents/Queue/SSG::Test');
$rt->setMethod('GET');
$r1 = $rt->request();
if ($r1->getStatus() !== 200) {
    echo 'ERROR ('.$r1->getStatus().'): '.$r1->getBody()."\n";
    exit(1);
}

$cod = new Zend_Http_Client('http://localhost/daw/xml/COD/v2/RT');
$cod->setMethod('POST');
$cod->setRawData($r1->getBody());
$r2 = $cod->request();
if ($r1->getStatus() !== 200) {
    echo 'ERROR ('.$r2->getStatus().'): '.$r2->getBody()."\n";
    exit(1);
}
echo $r2->getBody()."\n";
